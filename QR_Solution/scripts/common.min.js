function CommonFunction(){this.OnlyNumeric=function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode==65&&n.ctrlKey===!0||n.keyCode==67&&n.ctrlKey===!0||n.keyCode==86&&n.ctrlKey===!0||n.keyCode==88&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()};this.SpecialCharacter=function(n){(n.shiftKey==!0&&n.keyCode==192||n.shiftKey==!0&&n.keyCode==188||n.shiftKey==!0&&n.keyCode==190||n.shiftKey==!0&&n.keyCode==54||n.shiftKey==!0&&n.keyCode==219||n.shiftKey==!0&&n.keyCode==221||n.shiftKey==!0&&n.keyCode==47||n.shiftKey==!0&&n.keyCode==48||n.shiftKey==!0&&n.keyCode==49||n.shiftKey==!0&&n.keyCode==50||n.shiftKey==!0&&n.keyCode==51||n.shiftKey==!0&&n.keyCode==52||n.shiftKey==!0&&n.keyCode==53||n.shiftKey==!0&&n.keyCode==54||n.shiftKey==!0&&n.keyCode==55||n.shiftKey==!0&&n.keyCode==56||n.shiftKey==!0&&n.keyCode==57||n.keyCode==187||n.keyCode==189||n.keyCode==186||n.keyCode==222)&&n.preventDefault()};this.MoneyFormat=function(n){var t=n.toString().replaceAll(".","");return t.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.")};this.CallMoneyFormat=function(){$(".money").keyup(function(n){n.keyCode!=37&&n.keyCode!=39&&n.keyCode!=8&&n.keyCode!=35&&n.keyCode!=36&&n.keyCode!=46&&$(this).val($this.moneyFormat($(this).val()))});$(".money").keydown(function(n){$this.onlyNummeric(n)});$(".money").blur(function(){$(this).val($this.moneyFormat($(this).val()))})};this.validateEmail=function(n){if(n=="")return!0;return/^[_a-zA-Z0-9]+(\.[_a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/.test(n)};this.SimilarColor=function(n,t){if(n!=null&&n!=""&&n!=undefined&&t!=null&&t!=""&&t!=undefined){n=n.slice(1);t=t.slice(1);var f=parseInt(n.substring(0,2),16),e=parseInt(n.substring(2,4),16),o=parseInt(n.substring(4,6),16),s=parseInt(t.substring(0,2),16),h=parseInt(t.substring(2,4),16),c=parseInt(t.substring(4,6),16),i=255-Math.abs(f-s),r=255-Math.abs(e-h),u=255-Math.abs(o-c);return i/=255,r/=255,u/=255,(i+r+u)/3}};this.checkContrast=function(n,t){var r,u;if(n!=null&&n!=""&&n!=undefined&&t!=null&&t!=""&&t!=undefined){var i=this,f=n.charAt(0),e=t.charAt(0);return f=="#"&&(n=i.hexToRgb(n)),e=="#"&&(t=i.hexToRgb(t)),r=i.getRGBColor(n),u=i.getRGBColor(t),resultPercent=i.ContrastCalculator(r,u)}};this.hexToRgb=function(n){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),t="rgb(";return t=t+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+")",t?t:null};this.getRGBColor=function(n){var t=n.split("(")[1].split(")")[0].split(",");return(t[0]*.299+t[1]*.587+t[2]*.114)/255*100};this.ContrastCalculator=function(n,t){return Math.round(Math.abs(n-t))};this.checkQRContrast=function(n,t,i,r,u,f,e,o){var s=16,c=.9,l=!1,a=!1,v=!1,y=!1,p=!1,w=!1,b=!1,k=!1,d=!1,nt=this.checkContrast(n,t),tt=this.checkContrast(n,i),it=this.checkContrast(n,r),rt=this.checkContrast(n,u),ut=this.checkContrast(n,f),ft=this.checkContrast(n,e),et=this.checkContrast(n,o),h="#ffffff";background6="#ffff00";var ot=this.SimilarColor(n,"#000000"),st=this.SimilarColor(n,"#0000ff"),ht=this.SimilarColor(n,"#008000"),ct=this.SimilarColor(n,"#805d00"),g=!1;if((ot>c||st>c||ht>c||ct>c)&&(g=!0),g)$(".tooltipped").attr("data-tooltip","Màu nền này có thể làm cho QR Code không quét được. Hãy chọn màu khác"),$(".tooltipped").tooltip({delay:50}),$("#errorQR").show(),$("#bgColor").addClass("errQR");else{$("#errorQR").hide();$("#bgColor").removeClass("errQR");$(".tooltipped").attr("data-tooltip","Màu sắc bạn chọn có thể làm QR code không quét được. Vui lòng quét thử trước khi lưu");$(".tooltipped").tooltip({delay:50});nt<s&&(a=!0);tt<s&&(v=!0);it<s&&(y=!0);rt<s&&(p=!0);ut<s&&(w=!0);ft<s&&(b=!0);et<s&&(k=!0);var lt=this.SimilarColor(t,h),at=this.SimilarColor(i,h),vt=this.SimilarColor(r,h),yt=this.SimilarColor(u,h),pt=this.SimilarColor(f,h),wt=this.SimilarColor(e,h),bt=this.SimilarColor(o,h),kt=this.SimilarColor(t,background6),dt=this.SimilarColor(i,background6),gt=this.SimilarColor(r,background6),ni=this.SimilarColor(u,background6),ti=this.SimilarColor(f,background6),ii=this.SimilarColor(e,background6),ri=this.SimilarColor(o,background6);(lt>.95||at>.95||vt>.95||yt>.95||pt>.95||wt>.95||bt>.95||kt>.95||dt>.95||gt>.95||ni>.95||ti>.95||ii>.95||ri>.95)&&(d=!0);(a||v||y||p||w||b||k||d)&&(l=!0);l?($("#errorQR").show(),$("#bgColor").addClass("errQR")):($("#errorQR").hide(),$("#bgColor").removeClass("errQR"))}};this.fillEyeColor=function(n,t,i){var r=$(n);r.children(":nth-child(1)").css("fill",i);r.children(":nth-child(2)").css("fill",t)};this.generateQRCodeData=function(n,t){var c=this,o,r,i,s=0,l=0,f,a="01",v="pattern-01",e=1.25,h=0,u;o==""||o==undefined||o==null?(o="",u=document.createElement("img"),u.width=256,u.height=256,u.src=t,u.onload=function(){var d=document.createElement("canvas"),y,w,g,t,b,tt,k;d.width=u.width;d.height=u.height;y=d.getContext("2d");y.drawImage(u,0,0);var nt=!1,p=y.getImageData(0,0,u.width,u.height);for(t=0;t<p.data.length;t+=4)if(p.data[t]==0&&p.data[t+1]==0&&p.data[t+2]==0&&p.data[t+3]!=0&&(r=t/1028,nt=!0),nt)break;for(i=u.width-r*2,s=parseInt((i/n).toString()),l=i-s*n,i=s*n,f=s*7,h=u.width-(r+f+l),y.clearRect(0,0,r+f,r+f),y.clearRect(0,h,r+f+1,r+f+1),y.clearRect(h,0,r+f+1,r+f+1),w=document.createElement("canvas"),w.width=i,w.height=i,g=w.getContext("2d"),g.drawImage(d,r,r,i,i,0,0,i,i),t=0;t<i;t+=s)for(b=0;b<i;b+=s)tt=g.getImageData(b,t,i,i),k=tt.data,k[0]==0&&k[1]==0&&k[2]==0&&k[3]!=0&&(o+=t*e+"-"+b*e+",");w.remove();c.createQRSVG(r*e,f*e,a,o,v,i*e)}):c.createQRSVG(r*e,f*e,a,o,v,i*e)};this.createQRSVG=function(n,t,i,r,u,f){var c=this,y=f*.26/3.2,p=[1,2,3],k=document.URL.split("#")[0],l="images/newcreate/svg/eyes/",o="images/newcreate/svg/patterns/",e=".svg",s=t/224,a=t/7,r=r.slice(0,-1),w=r.split(",").map(function(n){var t=n.split("-");return{posX:t[0],posY:t[1]}}),v=d3.select("#bgColor").append("svg").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").attr("width",320).attr("height",320).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 320 320").classed("qr-code",!0).attr("id","qr-mira").attr("transform","scale(1)"),d=v.selectAll("svg").data("1").enter().append("g").attr("class","data-pattern").attr("transform",function(){return"translate("+n+" "+n+")"}),b=a/24,g=d3.select(".data-pattern").selectAll("g.data-pattern").data(w).enter().append("g").attr("class","data-pattern sub-data").attr("transform",function(n){return"translate("+n.posX+" "+n.posY+") scale("+b+")"}),h=u.split(",");h.length<2?($("#orgigin").html('<object type="image/svg+xml" data="'+l+i+e+'" width="100%" height="100%" id="eyeShapeObj"><\/object><object type="image/svg+xml" data="'+o+u+e+'" width="100%" height="100%" id="dataShapeObj1"><\/object>'),$("#dataShapeObj1").load(function(){c.loadDataShape("#dataShapeObj1");$("#orgigin #dataShapeObj1").remove()})):($("#orgigin").html('<object type="image/svg+xml" data="'+l+i+e+'" width="100%" height="100%" id="eyeShapeObj"><\/object><object type="image/svg+xml" data="'+o+h[0]+e+'" width="100%" height="100%" id="dataShapeObj1"><\/object><object type="image/svg+xml" data="'+o+h[1]+e+'" width="100%" height="100%" id="dataShapeObj2"><\/object>'),$("#orgigin #dataShapeObj1").load(function(){var n=common.getObjectChild("#dataShapeObj1").html();$("#qr-mira >.data-pattern g:nth-child(2n+1)").html(n);$("#orgigin #dataShapeObj1").remove()}),$("#orgigin #dataShapeObj2").load(function(){var n=common.getObjectChild("#dataShapeObj2").html();$("#qr-mira >.data-pattern g:nth-child(2n)").html(n);$("#orgigin #dataShapeObj2").remove()}));$("#eyeShapeObj").load(function(){var i=0,r;i=parseInt(a/2);r=v.selectAll("g:not(.data-pattern)").data(p).enter().append("g").attr("transform",function(r,u){var e;switch(u+1){case 1:e="translate("+(n+i)+" "+(n+i)+") scale("+s+")";break;case 2:e="translate("+(n+i)+" "+(f+n+i-t)+") scale("+s+")";break;case 3:e="translate("+(f+n+i-t)+" "+(n+i)+") scale("+s+")"}return e}).attr("class",function(n,t){return"svg-eye box-"+(t+1)});c.loadEyeShape("#eyeShapeObj");$("#orgigin #eyeShapeObj").remove()});$("#editLogo").css({height:y+"%"}).hide()};this.eyeToCanvas=function(){var i;$("#canvas-eye").remove();$(".qr-image").append('<div id="qr-canvas"><\/div>');i=$("#bgColor").attr("style");$("#qr-canvas").attr("style",i);var t=$(".eyes-box"),r=t.width(),n=t.css("left"),u=3;t.find("svg").each(function(){var i,t,f;u--;$("#qr-canvas").append('<div class="eyes-box" style="width:'+r+"px;height:"+r+'px"><\/div>');i=document.createElement("canvas");t=(new XMLSerializer).serializeToString(this);t=t.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(i,t);f=document.createElement("canvas");$("#qr-canvas .eyes-box:last-child").prepend(i);f.className="canvas-type-eye";switch(u){case 2:$("#qr-canvas .eyes-box:last-child").css({bottom:n,left:n});break;case 1:$("#qr-canvas .eyes-box:last-child").css({top:n,right:n});break;case 0:$("#qr-canvas .eyes-box:last-child").css({top:n,left:n})}})};this.patternToCanvas=function(n,t){var i,r;$("#qr-canvas").append('<div id="canvas-pattern"><\/div>');var u=$("#data-partern").width(),f=$("#data-partern").css("left"),e=$("#data-partern").css("top");$("#canvas-pattern").css({width:u,height:u,top:e,left:f});i=$("#data-partern .data:first");r=i[0].getBoundingClientRect().width;i.find("svg").each(function(){var u,e,o,f,i,s;for(u=document.createElement("canvas"),e=(new XMLSerializer).serializeToString(this),e=e.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,""),canvg(u,e),o=n.split(","),f=0;f<o.length-1;f++)i=document.createElement("canvas"),i.width=u.width,i.height=u.height,i.className="canvas-type-data",$("#canvas-pattern").append('<div class="data"><\/div>'),$("#canvas-pattern .data:last").append(i),$("#canvas-pattern .data:last").css({left:parseInt(o[f].split("-")[1])*1.25*100/(t*1.25)+"%",top:parseInt(o[f].split("-")[0])*1.25*100/(t*1.25)+"%",width:r+"px",height:r+"px"}),s=i.getContext("2d"),s.drawImage(u,0,0)});$("#editLogo").clone().appendTo("#qr-canvas");$("#bgColor").hide()};this.downloadQRCode=function(){var n=$(".qr-image");html2canvas(n,{onrendered:function(n){var t=document.createElement("a");t.href=n.toDataURL("image/jpg");window.open(t.href);t.download="MiraScan_Generator.jpg";document.body.appendChild(t);t.click();document.body.removeChild(t);$("#qr-canvas").remove();$("#bgColor").show();$("#loading").remove()}})};this.saveQRCodeToPNG=function(){var n=$(".qr-image"),t=n.find("svg");t.each(function(){var n,t;n=document.createElement("canvas");n.className="screenShotTempCanvas";t=(new XMLSerializer).serializeToString(this);t=t.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(n,t);$(n).insertAfter(this);$(n).css("width",$(this).width());$(n).css("height",$(this).height());this.className="tempHide";$(this).hide()});html2canvas(n,{onrendered:function(n){var t=document.createElement("a");t.href=n.toDataURL("image/jpg");window.open(t.href)}})};this.setColorHalfVertical=function(n,t){$("#qr-mira .sub-data").each(function(){var i=parseFloat($(this).css("transform").split(",")[4]);i>n/2&&($(this).css("fill",t),$(".box-3").children().css("fill",t))})};this.setColorHalfHorizontal=function(n,t){$("#data-partern .data").each(function(){$(this).position().top>n/2&&($(this).find("svg").children().css("fill",t),$(".box-2").find("svg").children().css("fill",t))})};this.previewScreenMobile=function(n){$("#preview-body").html("");$("#preview-body").removeClass().addClass(n);$(document).on("keyup",".display-form input.form-control:not(.social-input,#qrCodeName)",function(){$("#prvContent").text($(this).val())});switch(n){case"url":$("#preview-body").append('<p id="prvContent"><\/p>');break;case"text":$("#preview-body").append('<p id="prvContent"><\/p>');$("#preview-body").prepend('<h3 class="landing-text">Nội dung của bạn<\/h3>');break;case"phone":$("#preview-body").append('<div class="preview-phone"><p id="prvContent"><\/p><p class="btn-action"><a>Hủy<\/a><a>Gọi<\/a><\/p><\/div>');$("#preview-body").append('<div class="modal-backdrop fade in"><\/div>');break;case"sms":$("#preview-body").append('<div class="preview-sms"><p id="prvContent"><\/p><div class="sms-content-box"><div class="sms-content-cell"><div class id="sms_content"><\/div><\/div><\/div><\/div>');$("#preview-body").append('<img class="previe-sms-image" src="images/newcreate/preview/pv_sms.jpg">');$(document).on("keyup","#smscontent",function(){var n=$("#smscontent").val();n=n.replace(/\r?\n/g,"<br />");$("#sms_content").html(n)});break;case"email":$("#preview-body").append('<p class="preview-email" id="prvContent"><\/p>');$("#preview-body").append('<img class="previe-sms-image" src="images/newcreate/preview/prv_email.jpg">');break;case"social":$("#preview-body").append('<h3>Mạng xã hội của tôi<\/h3><a href="#" class="social-btn facebook"><i><\/i><span id="facebook_text"><\/span><\/a>');$(document).on("keyup",".social-input",function(){var n=$(this).val(),t=$(this).attr("id")+"_text";$("#"+t).text(n)});break;case"pdf":$("#preview-body").append('<img class="previe-pdf-image" src="images/newcreate/preview/prv_pdf.jpg">');break;case"audio":$("#preview-body").append('<img class="previe-audio-image" src="images/newcreate/preview/prv_audio.jpg">');break;case"geo":$("#preview-body").append('<img class="previe-full-image" src="images/newcreate/preview/prv_map.jpg">')}};this.HoverPreviewMode=function(){$(".qr-option").hover(function(){var n=$(this).attr("data-type");$("#preview-body").append('<img class="previe-full-image preview-mode" src="images/newcreate/preview/'+n+'.jpg">')},function(){$("#preview-body").find(".preview-mode").remove()})};this.FillterByCategory=function(n){n=="0"?$(".item").fadeIn():$(".img-frame").each(function(){$(this).attr("data-category")==n?$(this).parents(".item:first").fadeIn():$(this).parents(".item:first").fadeOut()})};this.loadEyeShape=function(n){var t=$($(n)[0].contentDocument.children).html();$(".svg-eye").html(t)};this.loadDataShape=function(n){var t=$($(n)[0].contentDocument.children).html();$(".sub-data").html(t)};this.getObjectChild=function(n){return $($(n)[0].contentDocument.children)};this.setLogoHeightReponsive=function(){$("#logoCustomize").on("load",function(){$(this).css("height","");var n=parseFloat($(this).height())/parseFloat($("#editLogo").height());$(this).css("height",n*100+"%")})};this.mergeLogoToSvg=function(){var n=document.createElement("canvas"),t=document.getElementById("logoCustomize");n.width=t.naturalWidth;n.height=t.naturalHeight;n.getContext("2d").drawImage(t,0,0);var u=n.toDataURL("image/png"),i=$("#logoCustomize")[0].getBoundingClientRect().width,r=$("#logoCustomize")[0].getBoundingClientRect().height,f=$("#logoCustomize").position().left,e=$("#logoCustomize").position().top+$("#editLogo").position().top;$("#editLogo").hide();d3.select("#qr-mira").selectAll("svg").data("1").enter().append("g").attr("class","logosvg").attr("transform","translate("+f+" "+e+")").append("rect").attr("fill","#fff").attr("width",i).attr("height",r);d3.select(".logosvg").selectAll("g.logosvg").data("1").enter().append("svg:image").attr("width",i).attr("height",r).attr("xlink:href",u)};this.convertToCanvas=function(){$this=this;var n=$("#qr-mira");n.each(function(){var n,t;n=document.createElement("canvas");n.className="qrCanvas";t=(new XMLSerializer).serializeToString(this);t=t.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(n,t);$(n).css("width",$(this).width());$(n).css("height",$(this).height());$("#bgColor").append(n);$("#qr-mira").hide()})};this.exportToSVG=function(n){var r,i;$this=this;$this.mergeLogoToSvg();var u=document.getElementById("qr-mira"),f=new XMLSerializer,t=f.serializeToString(u);t.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(t=t.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"'));t.match(/^<svg[^>]+"http\:\/\/www\.w3\.org\/1999\/xlink"/)||(t=t.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"'));t='<?xml version="1.0" standalone="no"?>\r\n'+t;r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t);i=document.createElement("a");i.href=r;i.download="mirascan-"+n;document.body.appendChild(i);i.click();document.body.removeChild(i);$("#editLogo").show();$(".logosvg").remove();$("#loading").remove()};this.exportToPNG=function(n){$this=this;$this.convertToCanvas();var t=$(".qr-image");html2canvas(t,{onrendered:function(t){var i=document.createElement("a");i.href=t.toDataURL("image/png");window.open(i.href);i.download="mirascan-"+n;document.body.appendChild(i);i.click();document.body.removeChild(i);$(".qrCanvas").remove();$("#qr-mira").show();$("#loading").remove()}})};this.exportToJPG=function(n){$this=this;$this.convertToCanvas();var t=$(".qr-image");html2canvas(t,{onrendered:function(t){var i=document.createElement("a");i.href=t.toDataURL("image/jpg");window.open(i.href);i.download="mirascan-"+n;document.body.appendChild(i);i.click();document.body.removeChild(i);$(".qrCanvas").remove();$("#qr-mira").show();$("#loading").remove()}})}}function FEValidation(){this.StringRequired=function(n,t,i){var r;if(toastr.remove(),r=$(n).attr("disabled"),r!==undefined&&r==="disabled")return!1;var e=$(n).val(),u=!1,f="";return(e==null||e.trim()=="")&&(u=!0,f=t+" không được bỏ trống."),u?($(n).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),i?toastr.warning(f):toastr.error(f)):(toastr.clear(),$(n).removeClass("errInput")),u};this.EmailValidate=function(n,t,i,r){var o,h,e,c;if(toastr.remove(),o=$(n).attr("disabled"),o!==undefined&&o==="disabled")return!1;var s=$(n).val().trim(),u=!1,f="";if(i&&(s==null||s=="")&&(u=!0,f=t+" không được bỏ trống."),!u)for(h=s.split(";"),e=0;e<h.length;e++)if(c=common.validateEmail(h[e].trim()),!c){u=!0;f="Email phải có dạng example@domain";break}return u?($(n).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),toastr.remove(),r?toastr.warning(f):toastr.error(f)):(toastr.clear(),$(n).removeClass("errInput")),u};this.DateCompare=function(n,t,i,r,u,f){var s;if(toastr.remove(),s=$(n).attr("disabled"),s!==undefined&&s==="disabled")return!1;var h=$(n).val().trim(),c=$(t).val().trim(),e=!1,o="";return u?Date.parse(h)<Date.parse(c)&&(e=!0,o=i+" phải lớn hơn "+r):Date.parse(h)>Date.parse(c)&&(e=!0,o=i+" phải nhỏ hơn "+r),e?($(n).parents("div:first").addClass("errInput"),toastr.remove(),f?toastr.warning(o):toastr.error(o)):($(n).parents("div:first").removeClass("errInput"),toastr.clear()),e};this.DateCompareRequired=function(n,t,i,r,u,f){var s;if(toastr.remove(),s=$(n).attr("disabled"),s!==undefined&&s==="disabled")return!1;var h=$(n).val().trim(),c=$(t).val().trim(),e=!1,o="";return h==""?(e=!0,o="Không được bỏ trống "+i):u?Date.parse(h)<Date.parse(c)&&(e=!0,o=i+" phải lớn hơn "+r):Date.parse(h)>Date.parse(c)&&(e=!0,o=i+" phải nhỏ hơn "+r),e?($(n).parents("div:first").addClass("errInput"),toastr.remove(),f?toastr.warning(o):toastr.error(o)):(toastr.clear(),$(n).parents("div:first").removeClass("errInput")),e};this.DateRequired=function(n,t,i){var r;if(toastr.remove(),r=$(n).attr("disabled"),r!==undefined&&r==="disabled")return!1;var e=$(n).val(),u=!1,f="";return e==""&&(u=!0,f="Bạn không được bỏ trống "+t),u?($(n).parents("div:first").addClass("errInput"),toastr.remove(),i?toastr.warning(f):toastr.error(f)):(toastr.clear(),$(n).parents("div:first").removeClass("errInput")),u};this.URLValidate=function(n,t,i){var r;if(toastr.remove(),r=$(n).attr("disabled"),r!==undefined&&r==="disabled")return!1;var e=$(n).val(),u=!1,f="",o=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi),e=$(n).val();return e.match(o)||(u=!0,f=t+" không đúng định dạng. Vui lòng nhập lại."),u?($(n).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),toastr.remove(),i?toastr.warning(f):toastr.error(f)):(toastr.clear(),$(n).removeClass("errInput")),u};this.LengthVlidate=function(n,t,i,r,u){var s,e,o;if(toastr.remove(),s=$(n).attr("disabled"),s!==undefined&&s==="disabled")return!1;var f=$(n).val(),e=!1,o="";return f!==null&&f.trim()!==""&&(i!==null&&i!==undefined&&i!==""&&f.length>i&&(e=!0,o=t+" không được vượt quá "+i+" ký tự."),r!==null&&r!==undefined&&r!==""&&f.length<r&&(e=!0,o=t+" phải lớn hơn "+r+" ký tự.")),e?($(n).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),toastr.remove(),u?toastr.warning(o):toastr.error(o)):(toastr.clear(),$(n).removeClass("errInput")),e};this.RadioGroupRequired=function(n,t){toastr.remove();var u=$(n).val(),i=!1,r=!1;return $(n).find("input").each(function(){return $(this).prop("checked")?(r=!0,i=!1):$(this).attr("disabled")||$(this).prop("checked")||(i=!0),r?!1:void 0}),i?(toastr.remove(),toastr.error(t)):toastr.clear(),i};this.ValidateSocialLink=function(n,t){var u,i,o;if(toastr.remove(),u=$(n).attr("disabled"),u!==undefined&&u==="disabled")return!1;var f=$(n).val(),r=!1,e="";if(f==null||f.trim()=="")e=t+" không được bỏ trống.",r=!0;else{switch(t){case"facebook":i=/(?:(?:http|https):\/\/)?(?:www.)?facebook.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[?\w\-]*\/)?(?:profile.php\?id=(?=\d.*))?([\w\-]*)?/gm;break;case"youtube":i=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/gm;break;case"twitter":i=/(?:http:\/\/)?(?:www\.)?twitter\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w\-]*\/)*([\w\-]*)/gm;break;case"instagram":i=/(https?:\/\/(www\.)?)?instagram\.com/gm}o=i.test(f);o||(r=!0,e=t+" không đúng định dạng. Vui lòng nhập lại.")}return r?($(n).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),toastr.remove(),toastr.error(e)):(toastr.clear(),$(n).removeClass("errInput")),r};this.ValidateMatch=function(n,t,i,r,u){var o,s;if(toastr.remove(),o=$(n).attr("disabled"),s=$(i).attr("disabled"),o!==undefined&&o==="disabled"&&s!==undefined&&s==="disabled")return!1;var e=$(n).val(),h=$(i).val(),f=!1;return u?e==""||e==undefined?(f=!0,r=t+" không được bỏ trống."):e!==h&&(f=!0):e!==h&&(f=!0),f?($(n).addClass("errInput"),$(i).addClass("errInput"),$(".errInput:first input:not('.date-picker')").focus(),toastr.remove(),toastr.error(r)):(toastr.clear(),$(n).removeClass("errInput"),$(i).removeClass("errInput")),f}}var common=new CommonFunction;$(document).ready(function(){$(".modal").modal();$(".tooltipped").tooltip({delay:50});toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"6000",extendedTimeOut:"3500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}});$(document).on("keydown",".numeric",function(n){common.OnlyNumeric(n)});